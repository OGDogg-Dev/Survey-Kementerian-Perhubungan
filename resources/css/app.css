@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@source '../views';
@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';

@custom-variant dark (&:is(.dark *));

@theme {
  --font-sans:
    'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Frost additions */
  --color-glacier: #3BA3F4;
  --color-glacier-700: #1D7FD1;
  --color-frost: #5EEAD4;
  --color-snow: #F8FAFC;
}

/* Tokens moved to resources/css/tokens.css */

@layer base {
  /*
    ? Core fix untuk "layar bergeser":
    - Pakai scrollbar-gutter di html (modern)
    - Fallback: paksa track scrollbar selalu ada di html (legacy)
    - Hapus pendekatan padding-right berbasis --sbw (cenderung 0 saat lock)
  */
  @supports (scrollbar-gutter: stable) {
    html { scrollbar-gutter: stable both-edges; }
  }
  @supports not (scrollbar-gutter: stable) {
    html { overflow-y: scroll; }
  }

  /* Hindari scroll horizontal tak sengaja ketika track berganti */
  *, *::before, *::after { box-sizing: border-box; }
  body { overflow-x: clip; }

  * { @apply border-border; }
  body { @apply bg-background text-foreground; }
}

@keyframes gradient { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

@layer utilities {
  /* Frost ease + shadow */
  .ease-frost { transition-timing-function: cubic-bezier(.2,.8,.2,1); }
  .shadow-frost { box-shadow: 0 10px 30px rgba(59,163,244,0.15); }

  /* Frost glass card */
  .frost-card { background: rgba(255,255,255,0.85); -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.6); box-shadow: 0 10px 30px rgba(59,163,244,0.15); border-radius: 1.25rem; }

  /* Accessible focus outline helper */
  .focus-ring:focus,
  .focus-ring:focus-visible { outline:2px solid #fffb00; outline-offset:2px; }

  /* Landing-like background surface applied globally */
  .surface-landing {
    --background: oklch(78.645% 0.08235 271.34);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.145 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.145 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(67.795% 0.1798 247.372);
    --primary-foreground: oklch(0.145 0 0);
    --accent: oklch(67.795% 0.1798 247.372);
    --accent-foreground: oklch(0.145 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --destructive: oklch(0.396 0.141 25.723);
    --destructive-foreground: oklch(0.985 0 0);
    --border: oklch(0.269 0 0);
    --input: oklch(0.269 0 0);
    --ring: oklch(0.439 0 0);
    --sidebar: var(--background);
    --sidebar-foreground: var(--foreground);
    --sidebar-primary: var(--primary);
    --sidebar-primary-foreground: var(--primary-foreground);
    --sidebar-accent: var(--secondary);
    --sidebar-accent-foreground: var(--secondary-foreground);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--ring);

    background-color: var(--background);
    background-image:
      radial-gradient(1000px 600px at 10% 10%, color-mix(in oklch, oklch(0.72 0.18 250), transparent 82%), transparent 60%),
      radial-gradient(800px 400px at 90% 20%, color-mix(in oklch, oklch(0.6 0.1 255), transparent 84%), transparent 60%),
      linear-gradient(135deg, color-mix(in oklch, var(--background), black 6%), color-mix(in oklch, var(--background), black 8%));
    background-attachment: fixed;
    color: var(--foreground);
  }

  .glass { @apply bg-white/10 backdrop-blur border border-white/20; }

  .dark .frost-card{ background: rgba(15,23,42,0.65); border-color: rgba(148,163,184,0.2); }
  .dark .focus-ring:focus,
  .dark .focus-ring:focus-visible{ outline-color:#3BA3F4; }

  .animate-gradient { background-size: 400% 400%; animation: gradient 15s ease infinite; }

  .neon-hover { transition: transform 0.3s, box-shadow 0.3s; }
  .neon-hover:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(147, 51, 234, 0.6), 0 0 30px rgba(147, 51, 234, 0.4); }

  .scrollbar-stable { scrollbar-gutter: stable both-edges; }

  [data-radix-popper-content-wrapper],
  [role="menu"],
  .dropdown-content { contain: layout paint; will-change: transform, opacity; transform: translateZ(0); }
}

@layer components {
  [data-app-topbar] {
    background: linear-gradient(180deg, color-mix(in oklch, var(--background), white 8%), color-mix(in oklch, var(--background), black 4%));
    backdrop-filter: blur(12px) saturate(140%);
    -webkit-backdrop-filter: blur(12px) saturate(140%);
    box-shadow: 0 1px 0 color-mix(in oklch, var(--foreground), transparent 92%) inset, 0 10px 24px color-mix(in oklch, var(--primary), transparent 92%);
  }
  .dark [data-app-topbar] {
    background: linear-gradient(180deg, color-mix(in oklch, var(--background), white 6%), color-mix(in oklch, var(--background), black 2%));
    box-shadow: 0 1px 0 color-mix(in oklch, var(--foreground), transparent 90%) inset, 0 12px 28px color-mix(in oklch, var(--primary), transparent 90%);
  }

  .card-accent { position: relative; overflow: hidden; border-radius: 16px; border: 1px solid color-mix(in oklch, var(--border), var(--foreground) 6%); background: color-mix(in oklch, var(--card), white 4%); box-shadow: 0 2px 10px color-mix(in oklch, var(--primary), transparent 92%), 0 1px 0 color-mix(in oklch, var(--foreground), transparent 92%) inset; transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease; }
  .card-accent:hover { transform: translateY(-2px); box-shadow: 0 8px 26px color-mix(in oklch, var(--primary), transparent 88%), 0 2px 0 color-mix(in oklch, var(--foreground), transparent 90%) inset; }
  .card-accent::before { content: ""; position: absolute; inset: 0 0 auto 0; height: 3px; background: linear-gradient(90deg, color-mix(in oklch, var(--primary), white 6%), color-mix(in oklch, var(--accent), white 6%)); opacity: .9; }
  .card-accent .card-muted { color: color-mix(in oklch, var(--foreground), transparent 40%); }

  .heading-hero { font-size: clamp(1.75rem, 2vw + 1rem, 2.25rem); font-weight: 700; letter-spacing: -0.02em; }
  .heading-1 { font-size: 1.5rem; font-weight: 600; letter-spacing: -0.01em; }
  .heading-2 { font-size: 1.25rem; font-weight: 600; }
  .muted { color: color-mix(in oklch, var(--foreground), transparent 40%); }

  .badge-published { background: color-mix(in oklch, var(--primary), white 10%); color: var(--primary-foreground); }
  .badge-draft { background: color-mix(in oklch, var(--muted), black 6%); color: var(--foreground); }

  .elev-1 { box-shadow: 0 2px 10px color-mix(in oklch, black, transparent 94%); }
  .elev-2 { box-shadow: 0 8px 28px color-mix(in oklch, black, transparent 90%); }
  .elev-3 { box-shadow: 0 16px 42px color-mix(in oklch, black, transparent 86%); }

  .landing-wrap { position: relative; color: var(--foreground); --background: color-mix(in oklch, var(--background), white 6%); --foreground: oklch(0.2 0 0); --border: color-mix(in oklch, var(--border), var(--foreground) 8%); }
  .landing-wrap::before { content:""; position: fixed; inset: 0; z-index: -2; background-image: radial-gradient(1100px 640px at 12% 8%, color-mix(in oklch, var(--accent), transparent 92%), transparent 60%), radial-gradient(900px 460px at 88% 12%, color-mix(in oklch, var(--primary), transparent 90%), transparent 60%), linear-gradient(135deg, color-mix(in oklch, var(--background), white 4%), color-mix(in oklch, var(--background), white 6%)); background-attachment: fixed; }
  .landing-wrap::after { content:""; position: fixed; inset: 0; z-index: -1; background-image: linear-gradient(to right, rgba(0,0,0,.04) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,.04) 1px, transparent 1px); background-size: 22px 22px; mask-image: radial-gradient(ellipse at center, black, transparent 78%); pointer-events: none; }

  .landing-wrap .card-accent { background: color-mix(in oklch, var(--background), white 90%) !important; border-color: color-mix(in oklch, var(--border), var(--foreground) 6%) !important; color: var(--foreground); backdrop-filter: blur(4px) saturate(130%); -webkit-backdrop-filter: blur(4px) saturate(130%); }

  .landing-hero-accent { background-image: linear-gradient(90deg, color-mix(in oklch, var(--primary), white 10%), color-mix(in oklch, var(--accent), white 10%)); -webkit-background-clip: text; background-clip: text; color: transparent; }

  .landing-search { border: 1px solid color-mix(in oklch, var(--border), var(--foreground) 8%); background-color: color-mix(in oklch, var(--background), white 8%); border-radius: 12px; padding: 2px; transition: box-shadow .2s ease, border-color .2s ease, background-color .2s ease; backdrop-filter: blur(6px) saturate(130%); -webkit-backdrop-filter: blur(6px) saturate(130%); }
  .landing-search:focus-within { box-shadow: 0 0 0 4px color-mix(in oklch, var(--primary), transparent 85%); border-color: color-mix(in oklch, var(--primary), white 15%); background-color: color-mix(in oklch, var(--background), white 10%); }

  .runner-progress { background-color: var(--primary); }

  .survey-run-card {
    position: relative; overflow: hidden; border-radius: 16px; border: 1px solid transparent;
    background: linear-gradient(135deg, color-mix(in oklch, var(--primary), transparent 85%), color-mix(in oklch, var(--accent), transparent 85%)) border-box,
                color-mix(in oklch, var(--background), white 6%) padding-box !important;
    color: var(--foreground) !important; backdrop-filter: blur(14px) saturate(150%); -webkit-backdrop-filter: blur(14px) saturate(150%);
    box-shadow: 0 1px 0 color-mix(in oklch, var(--foreground), transparent 92%) inset, 0 8px 28px color-mix(in oklch, var(--primary), transparent 90%), 0 2px 8px color-mix(in oklch, black, transparent 94%);
    transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease;
    --sjs-general-forecolor: var(--foreground);
    --sjs-general-forecolor-light: color-mix(in oklch, var(--foreground), transparent 40%);
    --sjs-primary-backcolor: var(--primary);
    --sjs-primary-forecolor: var(--primary-foreground);
    --sjs-border-default: var(--border);
    --sjs-questionpanel-backcolor: color-mix(in oklch, var(--background), white 16%);
    --sjs-questionpanel-hovercolor: color-mix(in oklch, var(--background), white 22%);
    --sjs-editorpanel-backcolor: color-mix(in oklch, var(--background), white 18%);
    --sjs-general-backcolor: color-mix(in oklch, var(--background), white 12%);
  }
  html.dark .survey-run-card { --sjs-questionpanel-backcolor: color-mix(in oklch, var(--background), white 10%); --sjs-questionpanel-hovercolor: color-mix(in oklch, var(--background), white 16%); --sjs-editorpanel-backcolor: color-mix(in oklch, var(--background), white 12%); --sjs-general-backcolor: color-mix(in oklch, var(--background), white 8%); }
  .survey-run-card:hover { transform: translateY(-1.5px); box-shadow: 0 1px 0 color-mix(in oklch, var(--foreground), transparent 92%) inset, 0 12px 36px color-mix(in oklch, var(--primary), transparent 88%), 0 3px 10px color-mix(in oklch, black, transparent 92%); }
  .survey-run-card::before { content: ""; position: absolute; inset: 0; pointer-events: none; background-image: conic-gradient(from 210deg at 20% 20%, rgba(255,255,255,.07) 0 8deg, transparent 8deg 360deg), conic-gradient(from 330deg at 80% 25%, rgba(255,255,255,.06) 0 6deg, transparent 6deg 360deg), conic-gradient(from 120deg at 40% 60%, rgba(255,255,255,.05) 0 10deg, transparent 10deg 360deg); opacity: .18; mask-image: radial-gradient(closest-side, black 58%, transparent); }
  .survey-run-card::after { content: ""; position: absolute; inset: 0; pointer-events: none; background: radial-gradient(600px 140px at 10% -10%, rgba(255,255,255,.14), transparent 60%), radial-gradient(600px 140px at 90% -10%, rgba(255,255,255,.12), transparent 60%); opacity: .28; }

  .survey-run-card .sd-root-modern,
  .survey-run-card .sd-title,
  .survey-run-card .sd-description,
  .survey-run-card .sd-question__title,
  .survey-run-card .sd-item__text,
  .survey-run-card .sv-string-editor { color: var(--foreground) !important; }
  .survey-run-card .sd-title .sd-header__text h3 { font-weight: 600; letter-spacing: -0.01em; }
  .survey-run-card .sd-description { opacity: .8; }
  .survey-run-card .sd-question__description,
  .survey-run-card .sd-html,
  .survey-run-card .sd-item__label,
  .survey-run-card .sd-label,
  .survey-run-card .sd-boolean__label,
  .survey-run-card .sd-matrix__cell-text,
  .survey-run-card .sd-multipletext__item-title { color: var(--foreground) !important; opacity: .92; }
  .survey-run-card .sd-question__title,
  .survey-run-card .sd-question__title .sd-title__text,
  .survey-run-card .sd-title__text,
  .survey-run-card .sv-string-viewer,
  .survey-run-card .sd-selectbase__item .sd-selectbase__label,
  .survey-run-card .sd-selectbase__item .sd-item__text { color: var(--foreground) !important; }
  .survey-run-card .sd-root-modern, .survey-run-card .sd-body, .survey-run-card .sd-element, .survey-run-card .sd-element__title, .survey-run-card .sd-element__header, .survey-run-card label, .survey-run-card .sv-action__content, .survey-run-card .sv-string-editor, .survey-run-card .sd-comment { color: var(--foreground) !important; }
  .survey-run-card .sd-table, .survey-run-card .sd-table__cell, .survey-run-card .sd-table__cell--header, .survey-run-card .sd-matrix__header, .survey-run-card .sd-matrix__cell, .survey-run-card .sd-matrix__cell--header { color: var(--foreground) !important; }
  .survey-run-card .sv-rating__item-text { color: var(--foreground) !important; }
  .survey-run-card .sd-selectbase__item .sd-item__text { opacity: 1 !important; }
  .survey-run-card .sd-checkbox__caption, .survey-run-card .sd-radio__caption, .survey-run-card .sd-checkbox__label, .survey-run-card .sd-radio__label { color: var(--foreground) !important; }
  .survey-run-card .sd-title, .survey-run-card .sd-description, .survey-run-card .sd-question__title { opacity: 1 !important; }

  .survey-run-card a { color: var(--primary); }
  .survey-run-card .sd-selectbase__item, .survey-run-card .sd-selectbase__item *, .survey-run-card .sd-checkbox, .survey-run-card .sd-radio, .survey-run-card .sd-checkbox *, .survey-run-card .sd-radio * { color: var(--foreground) !important; }
  .survey-run-card .sd-item--disabled .sd-item__text { opacity: .7 !important; }

  .survey-run-card { --sjs-general-forecolor: var(--foreground); --sjs-general-forecolor-light: color-mix(in oklch, var(--foreground), transparent 35%); --sjs-questionpanel-textcolor: var(--foreground); --sjs-editorfont-color: var(--foreground); --sjs-font-editorfont-color: var(--foreground); }
  .survey-run-card .sd-error { color: var(--destructive-foreground) !important; background-color: color-mix(in oklch, var(--destructive), white 90%) !important; border: 1px solid color-mix(in oklch, var(--destructive), var(--foreground) 12%) !important; border-radius: .5rem; padding: .25rem .5rem; }


  .sejuk-progress { background: color-mix(in oklch, var(--muted), var(--background) 30%); }
  .sejuk-progress-bar { background-image: linear-gradient(90deg, color-mix(in oklch, var(--primary), white 10%), color-mix(in oklch, var(--accent), white 10%)); box-shadow: 0 0 12px color-mix(in oklch, var(--primary), transparent 80%); transition: width .25s ease; }

  .step-dot { width: 6px; height: 6px; border-radius: 9999px; background: color-mix(in oklch, var(--muted-foreground), transparent 60%); transition: background-color .2s ease, transform .2s ease, box-shadow .2s ease; }
  .step-dot.active { background: var(--primary); transform: scale(1.05); box-shadow: 0 0 0 3px color-mix(in oklch, var(--primary), transparent 86%); }

  .kbd { display: inline-flex; align-items:center; justify-content:center; min-width:1.2rem; height:1.2rem; padding:0 .3rem; border-radius:.375rem; border:1px solid var(--border); background: color-mix(in oklch, var(--background), white 6%); color: color-mix(in oklch, var(--foreground), transparent 15%); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:10px; line-height:1; }

  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }

  .survey-run-card .sd-input,
  .survey-run-card .sd-text,
  .survey-run-card input,
  .survey-run-card textarea,
  .survey-run-card select,
  .survey-run-card .sv-string-editor,
  .survey-run-card .sd-selectbase { background-color: color-mix(in oklch, var(--background), white 92%) !important; color: var(--foreground) !important; border: 1px solid color-mix(in oklch, var(--border), var(--foreground) 10%) !important; border-radius: 10px !important; transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease; min-height: 44px; padding: 10px 12px; box-shadow: inset 0 0 0 1px transparent !important; }
  .survey-run-card .sv-string-editor { color: var(--foreground) !important; -webkit-text-fill-color: var(--foreground) !important; caret-color: var(--foreground); line-height: 1.5; white-space: pre-wrap; display: block; width: 100%; }
  .survey-run-card .sv-string-editor * { color: inherit !important; text-decoration-color: inherit !important; -webkit-text-fill-color: inherit !important; }

  html.dark .survey-run-card .sd-input,
  html.dark .survey-run-card .sd-text,
  html.dark .survey-run-card input,
  html.dark .survey-run-card textarea,
  html.dark .survey-run-card select,
  html.dark .survey-run-card .sv-string-editor,
  html.dark .survey-run-card .sd-selectbase { background-color: color-mix(in oklch, var(--background), white 10%) !important; color: var(--foreground) !important; border-color: color-mix(in oklch, var(--border), white 12%) !important; }
  .survey-run-card ::placeholder { color: color-mix(in oklch, var(--foreground), transparent 60%); }

  .survey-run-card .sd-input:focus,
  .survey-run-card .sd-text:focus,
  .survey-run-card input:focus,
  .survey-run-card textarea:focus,
  .survey-run-card select:focus,
  .survey-run-card .sv-string-editor:focus,
  .survey-run-card .sd-selectbase:focus { outline: none !important; border-color: var(--primary) !important; box-shadow: 0 0 0 3px color-mix(in oklch, var(--primary), transparent 72%) !important; background-color: color-mix(in oklch, var(--background), white 96%) !important; }
  html.dark .survey-run-card .sd-input:focus,
  html.dark .survey-run-card .sd-text:focus,
  html.dark .survey-run-card input:focus,
  html.dark .survey-run-card textarea:focus,
  html.dark .survey-run-card select:focus,
  html.dark .survey-run-card .sv-string-editor:focus,
  html.dark .survey-run-card .sd-selectbase:focus { background-color: color-mix(in oklch, var(--background), white 12%) !important; }

  .survey-run-card input[type='checkbox'],
  .survey-run-card input[type='radio'] { accent-color: yellow; }

  .survey-run-card .sd-btn { background-color: var(--primary) !important; color: var(--primary-foreground) !important; border: 0 !important; border-radius: .5rem !important; }
  .survey-run-card .sd-btn:hover { filter: brightness(.95); }

  .survey-run-surface {
    background: linear-gradient(180deg, #f8fbff 0%, #eef4ff 45%, #ffffff 100%);
  }

  .survey-run-wrap { position: relative; }
  .survey-run-wrap::before { content: none; }

  .sv-rating__item .sv-rating__icon { color: var(--color-glacier, #3BA3F4); opacity: .35; transition: opacity .15s ease; }
  .sv-rating__item--selected .sv-rating__icon,
  .sv-rating__item:hover .sv-rating__icon { color: var(--color-glacier, #3BA3F4); opacity: 1; }
  .sv-btn { @apply bg-primary text-primary-foreground rounded px-4 py-2; }
}

/* Brand Theme Variants */
html.theme-lime { --primary: oklch(0.83 0.2 128); --primary-foreground: oklch(0.2 0 0); --accent: oklch(0.78 0.18 85); --accent-foreground: oklch(0.18 0 0); }
html.dark.theme-lime { --primary: oklch(0.86 0.2 128); --primary-foreground: oklch(0.13 0 0); --accent: oklch(0.85 0.2 85); --accent-foreground: oklch(0.12 0 0); }

html.theme-emerald { --primary: oklch(0.7 0.17 160); --primary-foreground: oklch(0.14 0 0); --accent: oklch(0.75 0.17 200); --accent-foreground: oklch(0.14 0 0); }
html.dark.theme-emerald { --primary: oklch(0.78 0.18 160); --primary-foreground: oklch(0.12 0 0); --accent: oklch(0.8 0.18 200); --accent-foreground: oklch(0.12 0 0); }

html.theme-sunset { --primary: oklch(0.72 0.22 30); --primary-foreground: oklch(0.13 0 0); --accent: oklch(0.7 0.23 350); --accent-foreground: oklch(0.13 0 0); }
html.dark.theme-sunset { --primary: oklch(0.78 0.24 30); --primary-foreground: oklch(0.12 0 0); --accent: oklch(0.76 0.24 350); --accent-foreground: oklch(0.12 0 0); }

/* NProgress */
#nprogress { pointer-events: none; z-index: 9999; }
#nprogress .bar { background: var(--primary) !important; height: 3px !important; }
#nprogress .spinner { display: none !important; }
#nprogress .peg { box-shadow: 0 0 10px var(--primary), 0 0 5px var(--primary) !important; }

@keyframes nprogress-gradient { 0% { background-position: 0% 0; } 100% { background-position: 200% 0; } }
#nprogress .bar { background-image: linear-gradient(90deg, var(--primary) 0%, color-mix(in oklch, var(--primary), white 18%) 50%, var(--primary) 100%) !important; background-size: 200% 100%; animation: nprogress-gradient 1.5s linear infinite; }
#nprogress .bar::after { content: ""; position: absolute; right: 0; top: 0; height: 100%; width: 120px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); filter: blur(4px); opacity: .8; }

/* Busy blur */
body.nprogress-busy [data-app-topbar] { backdrop-filter: blur(8px) saturate(140%); -webkit-backdrop-filter: blur(8px) saturate(140%); transition: background-color .2s ease, backdrop-filter .2s ease; background-color: color-mix(in oklch, var(--background), white 8%); }

/* Global background */
html, body { min-height: 100%; }
body { background: linear-gradient(#ffffff, #F8FAFC); }


/* Survey runner contrast refresh */
.survey-run-card {
  background: #ffffff;
  border: 1px solid rgba(148,163,184,0.45);
  box-shadow: 0 20px 45px rgba(15,23,42,0.08);
}
html.dark .survey-run-card {
  background: rgba(15,23,42,0.85);
  border-color: rgba(148,163,184,0.35);
  box-shadow: 0 20px 45px rgba(8,11,23,0.6);
}

.survey-form-body {
  background: #f8fafc;
}
html.dark .survey-form-body {
  background: rgba(15,23,42,0.65);
}

.survey-form-body .sd-question {
  background: transparent;
  border: 0;
  box-shadow: none;
  color: #0f172a;
}
html.dark .survey-form-body .sd-question {
  background: transparent;
  border-color: transparent;
  color: rgba(226,232,240,0.95);
}

.survey-form-body .sd-question:hover {
  transform: translateY(-1px);
  box-shadow: none;
}

.survey-run-card .sd-question__title,
.survey-run-card .sd-description,
.survey-run-card .sd-title__text,
.survey-run-card .sv-string-viewer,
.survey-run-card .sd-item__text,
.survey-run-card .sd-selectbase__label,
.survey-run-card .sd-selectbase__item,
.survey-run-card .sd-radio__label,
.survey-run-card .sd-checkbox__label,
.survey-run-card .sv-string-editor,
.survey-run-card .sd-checkbox__caption,
.survey-run-card .sd-radio__caption {
  color: #0f172a !important;
  opacity: 1 !important;
}
html.dark .survey-run-card .sd-question__title,
html.dark .survey-run-card .sd-description,
html.dark .survey-run-card .sd-title__text,
html.dark .survey-run-card .sv-string-viewer,
html.dark .survey-run-card .sd-item__text,
html.dark .survey-run-card .sd-selectbase__label,
html.dark .survey-run-card .sd-selectbase__item,
html.dark .survey-run-card .sd-radio__label,
html.dark .survey-run-card .sd-checkbox__label,
html.dark .survey-run-card .sv-string-editor,
html.dark .survey-run-card .sd-checkbox__caption,
html.dark .survey-run-card .sd-radio__caption {
  color: rgba(226,232,240,0.95) !important;
}

.survey-run-card .sd-selectbase__item span,
.survey-run-card .sd-selectbase__item .sd-item__control,
.survey-run-card .sd-selectbase__item .sd-selectbase__label {
  color: #0f172a !important;
}
html.dark .survey-run-card .sd-selectbase__item span,
html.dark .survey-run-card .sd-selectbase__item .sd-item__control,
html.dark .survey-run-card .sd-selectbase__item .sd-selectbase__label {
  color: rgba(226,232,240,0.95) !important;
}

.survey-run-card .sv-rating__item {
  border-radius: 999px;
  background: #f1f5f9;
  border: 1px solid rgba(148,163,184,0.45);
  color: #0f172a;
}
html.dark .survey-run-card .sv-rating__item {
  background: rgba(30,41,59,0.65);
  border-color: rgba(148,163,184,0.45);
  color: rgba(226,232,240,0.95);
}
.survey-run-card .sv-rating__item:hover,
.survey-run-card .sv-rating__item--selected {
  background: #1d7fd1;
  border-color: #1d7fd1;
  color: #fff;
}
html.dark .survey-run-card .sv-rating__item:hover,
html.dark .survey-run-card .sv-rating__item--selected {
  background: #3ba3f4;
  border-color: #3ba3f4;
  color: #0b1120;
}

.survey-run-card .sv-rating__item-text {
  color: #64748b !important;
}
html.dark .survey-run-card .sv-rating__item-text {
  color: rgba(203,213,225,0.85) !important;
}

.survey-run-card .sd-input,
.survey-run-card .sd-text,
.survey-run-card input,
.survey-run-card textarea,
.survey-run-card select,
.survey-run-card .sd-selectbase {
  background: #ffffff !important;
  color: #0f172a !important;
  border-color: rgba(148,163,184,0.45) !important;
  box-shadow: none !important;
}
html.dark .survey-run-card .sd-input,
html.dark .survey-run-card .sd-text,
html.dark .survey-run-card input,
html.dark .survey-run-card textarea,
html.dark .survey-run-card select,
html.dark .survey-run-card .sd-selectbase {
  background: rgba(15,23,42,0.7) !important;
  color: rgba(226,232,240,0.95) !important;
  border-color: rgba(148,163,184,0.5) !important;
}

.survey-run-card .sd-input:focus,
.survey-run-card input:focus,
.survey-run-card textarea:focus,
.survey-run-card select:focus {
  box-shadow: 0 0 0 3px rgba(59,163,244,0.25) !important;
  border-color: #1d7fd1 !important;
}
html.dark .survey-run-card .sd-input:focus,
html.dark .survey-run-card input:focus,
html.dark .survey-run-card textarea:focus,
html.dark .survey-run-card select:focus {
  box-shadow: 0 0 0 3px rgba(59,163,244,0.35) !important;
  border-color: #3ba3f4 !important;
}

.survey-run-card .sd-page__description,
.survey-run-card .sd-panel__description,
.survey-run-card .sd-question__description {
  color: #475569 !important;
}
html.dark .survey-run-card .sd-page__description,
html.dark .survey-run-card .sd-panel__description,
html.dark .survey-run-card .sd-question__description {
  color: rgba(203,213,225,0.9) !important;
}

/* Cohesive survey form shell */
.survey-run-card .survey-form-body {
  background: transparent;
}

.survey-form-shell {
  background: #ffffff;
  border: 1px solid rgba(148,163,184,0.32);
  border-radius: 28px;
  box-shadow: 0 24px 52px rgba(15,23,42,0.08);
  padding: clamp(24px, 5vw, 36px);
  display: flex;
  flex-direction: column;
  gap: 28px;
}
html.dark .survey-form-shell {
  background: rgba(15,23,42,0.85);
  border-color: rgba(148,163,184,0.45);
  box-shadow: 0 28px 60px rgba(2,6,23,0.55);
}

.survey-form-shell .sd-rows,
.survey-form-shell .sd-row,
.survey-form-shell .sd-row__question {
  display: flex !important;
  flex-direction: column !important;
  gap: 28px !important;
  margin: 0 !important;
  padding: 0 !important;
}

.survey-form-shell .sd-question {
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

.survey-form-shell .sd-question:not(:last-of-type) {
  border-bottom: 1px solid rgba(148,163,184,0.25) !important;
  padding-bottom: 28px !important;
}
html.dark .survey-form-shell .sd-question:not(:last-of-type) {
  border-bottom-color: rgba(148,163,184,0.35) !important;
}

.survey-form-shell .sd-question__content {
  padding: 0 !important;
  margin: 0 !important;
}

.survey-form-shell .sd-question__header {
  margin-bottom: 16px !important;
}

.survey-form-shell .sd-selectbase__item {
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
  padding: 12px 16px !important;
  border-radius: 16px !important;
  background: rgba(148,163,184,0.12) !important;
  border: 1px solid rgba(148,163,184,0.45) !important;
  transition: background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.survey-form-shell .sd-selectbase__item:hover {
  background: rgba(29,127,209,0.16) !important;
  border-color: #1D7FD1 !important;
}
.survey-form-shell .sd-selectbase__item--checked {
  background: rgba(29,127,209,0.18) !important;
  border-color: #1D7FD1 !important;
  box-shadow: 0 0 0 1px rgba(29,127,209,0.25) !important;
}
html.dark .survey-form-shell .sd-selectbase__item {
  background: rgba(30,41,59,0.45) !important;
  border-color: rgba(148,163,184,0.5) !important;
}
html.dark .survey-form-shell .sd-selectbase__item:hover {
  background: rgba(59,163,244,0.22) !important;
  border-color: #3BA3F4 !important;
}
html.dark .survey-form-shell .sd-selectbase__item--checked {
  background: rgba(59,163,244,0.28) !important;
  border-color: #3BA3F4 !important;
  box-shadow: 0 0 0 1px rgba(59,163,244,0.35) !important;
}

.survey-form-shell .sd-selectbase__item .sd-item__control {
  min-width: 20px !important;
  min-height: 20px !important;
}

.survey-form-shell .sv-rating__item {
  width: 3rem !important;
  height: 3rem !important;
  border-radius: 999px !important;
  border: 1px solid rgba(148,163,184,0.45) !important;
  background: rgba(148,163,184,0.12) !important;
  color: #0F172A !important;
  transition: transform .2s ease, background-color .2s ease, border-color .2s ease;
}
.survey-form-shell .sv-rating__item:hover {
  transform: translateY(-2px) !important;
}
.survey-form-shell .sv-rating__item--selected {
  background: #1D7FD1 !important;
  border-color: #1D7FD1 !important;
  color: #FFFFFF !important;
}
html.dark .survey-form-shell .sv-rating__item {
  background: rgba(30,41,59,0.45) !important;
  border-color: rgba(148,163,184,0.45) !important;
  color: rgba(226,232,240,0.95) !important;
}
html.dark .survey-form-shell .sv-rating__item--selected {
  background: #3BA3F4 !important;
  border-color: #3BA3F4 !important;
  color: #0B1120 !important;
}

.survey-form-shell .sv-rating__item-text {
  margin-top: 0.35rem !important;
  font-size: 0.75rem !important;
  color: rgba(100,116,139,0.9) !important;
  text-align: center !important;
}
html.dark .survey-form-shell .sv-rating__item-text {
  color: rgba(226,232,240,0.8) !important;
}
.survey-form-shell .sd-question {
  border-left: 0 !important;
}
.survey-form-shell .sd-question::before,
.survey-form-shell .sd-question::after,
.survey-form-shell .sd-question__title::before,
.survey-form-shell .sd-question__title::after {
  content: none !important;
}
.survey-form-shell .sd-checkbox .sd-item__control,
.survey-form-shell .sd-selectbase__item .sd-checkbox__control {
  width: 20px !important;
  height: 20px !important;
  min-width: 20px !important;
  min-height: 20px !important;
  border-radius: 6px !important;
  border: 2px solid rgba(148,163,184,0.45) !important;
  background: #ffffff !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-shadow: none !important;
  transition: all .18s ease !important;
}
html.dark .survey-form-shell .sd-checkbox .sd-item__control,
html.dark .survey-form-shell .sd-selectbase__item .sd-checkbox__control {
  border-color: rgba(148,163,184,0.5) !important;
  background: rgba(15,23,42,0.72) !important;
}
.survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control,
.survey-form-shell .sd-selectbase__item--checked .sd-checkbox__control {
  border-color: #ffff00 !important;
  background: #ffff00 !important;
}
html.dark .survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control,
html.dark .survey-form-shell .sd-selectbase__item--checked .sd-checkbox__control {
  border-color: #ffff00 !important;
  background: #ffff00 !important;
}
.survey-form-shell .sd-checkbox .sd-item__control svg,
.survey-form-shell .sd-checkbox .sd-item__control path,
.survey-form-shell .sd-checkbox .sd-item__control use {
  stroke: transparent !important;
  fill: none !important;
}
.survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control svg,
.survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control path,
.survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control use {
  stroke: #ffffff !important;
  fill: none !important;
}
html.dark .survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control svg,
html.dark .survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control path,
html.dark .survey-form-shell .sd-selectbase__item--checked .sd-checkbox .sd-item__control use {
  stroke: #0B1120 !important;
}


